<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MONTBLOCK â€“ Factory Records</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;margin:0;background:#f4f4f4}
header{background:#000;color:#fff;padding:15px;text-align:center;font-weight:bold}
nav{display:flex;flex-wrap:wrap;justify-content:space-around;background:#e0e0e0;padding:10px}
nav button{padding:10px;border:none;background:#000;color:#fff;border-radius:4px;margin:3px}
section{padding:15px}
.card{background:#fff;padding:12px;margin-bottom:12px;border-radius:6px}
input,select{width:100%;padding:8px;margin:6px 0}
.small{font-size:13px;color:#555}
</style>
</head>

<body>

<header>MONTBLOCK â€“ Factory Records</header>

<nav>
<button onclick="show('dash')">Dashboard</button>
<button onclick="show('cement')">Cement</button>
<button onclick="show('prod')">Production</button>
<button onclick="show('sale')">Sales</button>
<button onclick="show('exp')">Expenses</button>
<button onclick="show('history')">History</button>
</nav>

<section id="dash" class="card"></section>

<section id="cement" class="card" style="display:none">
<h3>ğŸ—ï¸ Cement IN</h3>
<input id="cdate" type="date">
<input id="cbags" type="number" placeholder="Bags">
<input id="cprice" type="number" placeholder="Price per bag">
<button onclick="saveCement()">Save</button>
</section>

<section id="prod" class="card" style="display:none">
<h3>ğŸ§± Block Production</h3>
<input id="pdate" type="date">
<select id="psize">
<option value="4">4 inch</option>
<option value="5">5 inch</option>
<option value="6">6 inch</option>
</select>
<input id="pqty" type="number" placeholder="Quantity">
<button onclick="saveProd()">Save</button>
</section>

<section id="sale" class="card" style="display:none">
<h3>ğŸ§± Block Sales</h3>
<input id="sdate" type="date">
<select id="ssize">
<option value="4">4 inch</option>
<option value="5">5 inch</option>
<option value="6">6 inch</option>
</select>
<input id="sqty" type="number" placeholder="Quantity">
<input id="sprice" type="number" placeholder="Price per block">
<button onclick="saveSale()">Save</button>
</section>

<section id="exp" class="card" style="display:none">
<h3>ğŸ’¸ Expense</h3>
<input id="edate" type="date">
<input id="etype" placeholder="Expense type">
<input id="eamt" type="number" placeholder="Amount">
<button onclick="saveExpense()">Save</button>
</section>

<section id="history" class="card" style="display:none">
<h3>ğŸ“œ History</h3>
<div id="hlist"></div>
</section>

<script>
let store = JSON.parse(localStorage.getItem("montblock2")) || {records:[]};

function nowTime(){
  let d=new Date();
  return d.toLocaleTimeString("en-US",{hour:'numeric',minute:'2-digit',hour12:true});
}
function fmtDate(d){
  let x=new Date(d);
  return `${String(x.getDate()).padStart(2,'0')}-${String(x.getMonth()+1).padStart(2,'0')}-${x.getFullYear()}`;
}
function save(){localStorage.setItem("montblock2",JSON.stringify(store));dashboard();}

function show(id){
["dash","cement","prod","sale","exp","history"].forEach(s=>document.getElementById(s).style.display="none");
document.getElementById(id).style.display="block";
if(id==="history")renderHistory();
}

function addRecord(r){store.records.push(r);save();}

function saveCement(){
addRecord({type:"cement",bags:+cbags.value,price:+cprice.value,
date:fmtDate(cdate.value),time:nowTime()});
cbags.value="";cprice.value="";
}

function saveProd(){
addRecord({type:"prod",size:psize.value,qty:+pqty.value,
date:fmtDate(pdate.value),time:nowTime()});
pqty.value="";
}

function saveSale(){
addRecord({type:"sale",size:ssize.value,qty:+sqty.value,price:+sprice.value,
date:fmtDate(sdate.value),time:nowTime()});
sqty.value="";sprice.value="";
}

function saveExpense(){
addRecord({type:"exp",name:etype.value,amt:+eamt.value,
date:fmtDate(edate.value),time:nowTime()});
etype.value="";eamt.value="";
}

function dashboard(){
let cement=0,sales=0,exp=0,stock={4:0,5:0,6:0};
store.records.forEach(r=>{
if(r.type==="cement")cement+=r.bags,exp+=r.bags*r.price;
if(r.type==="prod")stock[r.size]+=r.qty;
if(r.type==="sale")stock[r.size]-=r.qty,sales+=r.qty*r.price;
if(r.type==="exp")exp+=r.amt;
});
dash.innerHTML=`
<p><b>ğŸ—ï¸ Cement:</b> ${cement} bags</p>
<p>ğŸ§± 4": ${stock[4]} | 5": ${stock[5]} | 6": ${stock[6]}</p>
<p>ğŸ’° Sales: ${sales.toLocaleString()}</p>
<p>ğŸ’¸ Expenses: ${exp.toLocaleString()}</p>
<p><b>ğŸ“ˆ Profit: ${(sales-exp).toLocaleString()}</b></p>`;
}

function renderHistory(){
hlist.innerHTML=store.records.map((r,i)=>`
<p class="small">${i+1}. ${r.type.toUpperCase()} | ${r.date} ${r.time}</p>
`).join("");
}

["cdate","pdate","sdate","edate"].forEach(id=>{
document.getElementById(id).value=new Date().toISOString().split("T")[0];
});

dashboard();
</script>

</body>
</html>
