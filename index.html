<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MONTBLOCK – Factory System</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #f5f5f5;
}

header {
  background: #000;
  color: #fff;
  padding: 14px;
  text-align: center;
  font-weight: bold;
}

button {
  width: 100%;
  padding: 14px;
  margin: 6px 0;
  font-size: 16px;
  border: none;
  background: #000;
  color: #fff;
  border-radius: 6px;
}

.section {
  padding: 12px;
  background: #fff;
  margin: 10px;
  border-radius: 6px;
}

.item {
  border-bottom: 1px solid #ddd;
  padding: 8px 0;
}

.item:last-child {
  border-bottom: none;
}

.total-box {
  margin-top: 12px;
  padding-top: 10px;
  border-top: 2px solid #000;
  font-weight: bold;
}
</style>
</head>

<body>

<header>MONTBLOCK – Factory System</header>

<div class="section">
  <button onclick="showHistory()">History</button>
  <button onclick="showReports()">Reports</button>
</div>

<div class="section" id="output"></div>

<script>
// -------------------- DATA --------------------
const records = [
  { type: "expense", desc: "Luku", amount: 30000, date: "2025-12-29" },
  { type: "expense", desc: "Normal Sand", amount: 290000, date: "2025-12-29" },
  { type: "expense", desc: "Bagamoyo Sand", amount: 400000, date: "2025-12-29" },

  { type: "sale", size: '5"', qty: 400, price: 1350, date: "2026-01-08" },
  { type: "sale", size: '5"', qty: 30, price: 1000, date: "2026-01-06" },
  { type: "sale", size: '5"', qty: 60, price: 1000, date: "2026-01-06" },
  { type: "sale", size: '5"', qty: 22, price: 1000, date: "2026-01-04" },
  { type: "sale", size: '6"', qty: 100, price: 1050, date: "2026-01-04" },
  { type: "sale", size: '6"', qty: 12, price: 900, date: "2026-01-02" },
  { type: "sale", size: '6"', qty: 600, price: 1350, date: "2026-01-01" },

  { type: "production", size: '5"', qty: 2394, date: "2026-01-02" },
  { type: "production", size: '6"', qty: 1505, date: "2025-12-28" },

  { type: "cement_in", bags: 100, price: 16750, date: "2025-12-27" },
  { type: "cement_out", bags: 100, date: "2025-12-28" }
];

// -------------------- HELPERS --------------------
function money(n) {
  return n.toLocaleString();
}

// -------------------- HISTORY --------------------
function showHistory() {
  const out = document.getElementById("output");
  out.innerHTML = "<h3>History (Latest First)</h3>";

  [...records].reverse().forEach(r => {
    let line = "";

    if (r.type === "sale") {
      const total = r.qty * r.price;
      line = `Sale: ${r.size} ${r.qty} @ ${money(r.price)} = ${money(total)}`;
    }

    if (r.type === "expense") {
      line = `Expense: ${r.desc} – ${money(r.amount)}`;
    }

    if (r.type === "production") {
      line = `Production: ${r.size} Qty ${r.qty}`;
    }

    if (r.type === "cement_in") {
      const total = r.bags * r.price;
      line = `Cement IN: ${r.bags} bags @ ${money(r.price)} = ${money(total)}`;
    }

    if (r.type === "cement_out") {
      line = `Cement OUT: ${r.bags} bags used`;
    }

    out.innerHTML += `
      <div class="item">
        <strong>${line}</strong><br/>
        <small>${r.date}</small>
      </div>
    `;
  });
}

// -------------------- REPORTS --------------------
function showReports() {
  const out = document.getElementById("output");
  let totalSales = 0;
  let totalExpenses = 0;

  out.innerHTML = "<h3>Reports</h3>";

  records.forEach(r => {
    let line = "";

    if (r.type === "sale") {
      const total = r.qty * r.price;
      totalSales += total;
      line = `${r.date} – Sale: ${r.size} ${r.qty} @ ${money(r.price)} = ${money(total)}`;
    }

    if (r.type === "expense") {
      totalExpenses += r.amount;
      line = `${r.date} – Expense: ${r.desc} – ${money(r.amount)}`;
    }

    if (r.type === "production") {
      line = `${r.date} – Production: ${r.size} Qty ${r.qty}`;
    }

    if (r.type === "cement_in") {
      const total = r.bags * r.price;
      totalExpenses += total;
      line = `${r.date} – Cement IN: ${r.bags} bags @ ${money(r.price)} = ${money(total)}`;
    }

    if (r.type === "cement_out") {
      line = `${r.date} – Cement OUT: ${r.bags} bags used`;
    }

    out.innerHTML += `<div class="item">${line}</div>`;
  });

  const net = totalSales - totalExpenses;

  out.innerHTML += `
    <div class="total-box">
      TOTAL SALES: ${money(totalSales)}<br/>
      TOTAL EXPENSES: ${money(totalExpenses)}<br/>
      NET BALANCE: ${money(net)}
    </div>
  `;
}

// default
showHistory();
</script>

</body>
</html>